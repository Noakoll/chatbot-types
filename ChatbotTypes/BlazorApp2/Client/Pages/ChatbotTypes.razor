@page "/chatbot-types"
@layout EmptyLayout
@inject IJSRuntime JSRuntime

<PageTitle>עולם הצ'אטבוטים - שני סוגים עיקריים</PageTitle>

<div class="chatbot-website">
    <header class="main-header">
        <h1>עולם הצ'אטבוטים - שני סוגים עיקריים</h1>
        <div class="video-text">
            בסרטון למדנו ששני הסוגים העיקריים של צ'אטבוטים הם: מבוססי חוקים ומבוססי בינה מלאכותית. כעת נכיר דוגמאות מעשיות מכל סוג ונבין איך הם יכולים לסייע לנו בלימודים!
        </div>
    </header>

    <section class="categories-container">
        <!-- Title for AI categories spanning both columns -->
        <div class="ai-categories-wrapper">
            <h2 class="category-title ai-main-title">צ'אטבוטים מבוססי בינה מלאכותית</h2>
            <div class="ai-categories-grid">
                <!-- Basic AI Section -->
                <div class="subcategory animate-on-scroll">
                    <h3 class="subcategory-title">
                        <div class="branch-icon">🤖</div>
                        בינה מלאכותית בסיסית
                    </h3>
                    <p class="branch-description">
                        צ'אטבוטים שמשתמשים בטכנולוגיות של עיבוד שפה טבעית (NLP) ומבצעות למידת מכונה בסיסית.
                    </p>
                    
                    @foreach (var bot in basicAiBots)
                    {
                        <ChatbotCard Bot="bot" OnToggle="ToggleCard" />
                    }
                </div>

                <!-- LLM Section -->
                <div class="subcategory llm-category animate-on-scroll">
                    <h3 class="subcategory-title">
                        <div class="branch-icon">🧠</div>
                        מודלים שפתיים גדולים (LLM)
                    </h3>
                    <p class="branch-description">
                        הצ'אטבוטים המתקדמים ביותר בקטגוריית הבינה המלאכותית, המבוססים על מודלים שהוכשרו על כמויות עצומות של טקסט.
                    </p>
                    
                    @foreach (var bot in llmBots)
                    {
                        <ChatbotCard Bot="bot" OnToggle="ToggleCard" />
                    }
                </div>
            </div>
        </div>

        <!-- Rule-based Section -->
        <div class="category-section rule-based-wrapper">
            <h2 class="category-title">צ'אטבוטים מבוססי חוקים</h2>
            <div class="branch rule-based animate-on-scroll">
                <p class="branch-description">
                    צ'אטבוטים אלו פועלים לפי תסריטים ותבניות מוגדרים מראש. הם מצוינים במשימות ספציפיות ונותנים תשובות מדויקות לשאלות צפויות.
                </p>

                @foreach (var bot in ruleBots)
                {
                    <ChatbotCard Bot="bot" OnToggle="ToggleCard" />
                }
            </div>
        </div>
    </section>

    <!-- Comparison Table -->
    <ComparisonTable />

    <!-- Summary -->
    <footer class="summary animate-on-scroll">
        <p>
            כפי שראינו, צ'אטבוטים מבוססי חוקים מצוינים למשימות מוגדרות וספציפיות, בעוד שצ'אטבוטים מבוססי בינה מלאכותית (כולל מודלים שפתיים גדולים) מציעים גמישות ויכולות הבנה מתקדמות יותר. הבחירה ביניהם תלויה במשימה הספציפית שלכם!
        </p>
    </footer>
</div>

@code {
    private List<ChatbotInfo> ruleBots = new();
    private List<ChatbotInfo> basicAiBots = new();
    private List<ChatbotInfo> llmBots = new();

    protected override void OnInitialized()
    {
        InitializeChatbots();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try 
            {
                await JSRuntime.InvokeVoidAsync("initializeAnimations");
            }
            catch (Exception ex)
            {
                // Ignore JS errors for now
                Console.WriteLine($"JS Error: {ex.Message}");
            }
        }
    }

    private void InitializeChatbots()
    {
        ruleBots = new List<ChatbotInfo>
        {
            new ChatbotInfo
            {
                Id = "quizbot",
                Name = "QuizBot",
                LogoText = "QB",
                Color = "var(--primary-purple)",
                Description = "צ'אטבוט שמפעיל שאלות וחידונים אינטראקטיביים עם משוב מיידי",
                Usage = "שיפור הבנה וזכירה של חומר לימודי",
                Strengths = "תשובות מדויקות, משוב מיידי, עקביות בתגובות",
                Limitations = "לא מבין שאלות לא צפויות, חוסר גמישות",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = true, Text = "היי! רוצה לתרגל את החומר על צ'אטבוטים?" },
                    new ChatMessage { IsBot = false, Text = "כן" },
                    new ChatMessage { IsBot = true, Text = "מצוין! מהם שני הסוגים העיקריים של צ'אטבוטים?" },
                    new ChatMessage { IsBot = false, Text = "מבוססי חוקים ומבוססי בינה מלאכותית" },
                    new ChatMessage { IsBot = true, Text = "נכון מאוד! 🌟 שאלה הבאה: איזה סוג צ'אטבוט בדרך כלל יותר מדויק במשימות ספציפיות?" }
                },
                WebsiteUrl = "https://quizbot.ai"
            },
            new ChatbotInfo
            {
                Id = "classbot",
                Name = "ClassBot",
                LogoText = "CB",
                Color = "var(--primary-purple)",
                Description = "צ'אטבוט שמנהל את הקורס בזמן אמת",
                Usage = "עזרה בשאלות על משימות, לוחות זמנים, דרישות הקורס",
                Strengths = "מידע מדויק וזמין 24/7 על הקורס",
                Limitations = "לא יכול לענות על שאלות מחוץ לתחום המוגדר",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = false, Text = "מתי צריך להגיש את העבודה בקורס צ'אטבוטים?" },
                    new ChatMessage { IsBot = true, Text = "העבודה בקורס צ'אטבוטים צריכה להיות מוגשת עד ה-15.5 בשעה 23:59." },
                    new ChatMessage { IsBot = false, Text = "האם אפשר להגיש בזוגות?" },
                    new ChatMessage { IsBot = true, Text = "לא, העבודה היא אישית. אם יש לך שאלות נוספות על העבודה, אפשר לפנות למרצה בשעות הקבלה יום ב' 14:00-16:00." }
                },
                WebsiteUrl = "https://www.classbot.com"
            },
            new ChatbotInfo
            {
                Id = "googleforms",
                Name = "Google Forms Bot",
                LogoText = "GF",
                Color = "var(--primary-purple)",
                Description = "בוט לניהול משובים וסקרים",
                Usage = "איסוף נתונים, משובים, בחנים קצרים",
                Strengths = "עיבוד מהיר של טפסים, איסוף נתונים יעיל",
                Limitations = "אינטראקציה מוגבלת, תשובות סטנדרטיות בלבד",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = true, Text = "שלום, אשמח אם תוכל/י למלא משוב קצר על השיעור האחרון (5 שאלות, כ-2 דקות)." },
                    new ChatMessage { IsBot = false, Text = "בסדר" },
                    new ChatMessage { IsBot = true, Text = "שאלה 1/5: עד כמה השיעור היה ברור? דרג/י מ-1 עד 5" },
                    new ChatMessage { IsBot = false, Text = "4" },
                    new ChatMessage { IsBot = true, Text = "תודה! שאלה 2/5: מה היה החלק המעניין ביותר בשיעור?" }
                },
                WebsiteUrl = "https://forms.google.com"
            }
        };

        basicAiBots = new List<ChatbotInfo>
        {
            new ChatbotInfo
            {
                Id = "duolingo",
                Name = "Duolingo Bot",
                LogoText = "D",
                Color = "var(--accent-green)",
                Description = "צ'אטבוט לימוד שפות המאפשר תרגול שיחה והתקדמות בשפה חדשה",
                Usage = "תרגול שיחה בשפה זרה, תיקון שגיאות דקדוק",
                Strengths = "התאמה אישית, למידה מטעויות, שיחה טבעית",
                Limitations = "מוגבל לתחום הלימוד הספציפי",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = true, Text = "¡Hola! ¿Cómo estás hoy? (שלום! מה שלומך היום?)" },
                    new ChatMessage { IsBot = false, Text = "Estoy bien, y tu?" },
                    new ChatMessage { IsBot = true, Text = "¡Muy bien! כמעט מושלם, אבל שים לב - בספרדית צריך סימן שאלה בהתחלה וגם אקצנט: ¿y tú?. בוא נמשיך - ¿Qué te gusta hacer?" }
                },
                WebsiteUrl = "https://www.duolingo.com"
            },
            new ChatbotInfo
            {
                Id = "bookbot",
                Name = "Bookbot",
                LogoText = "📚",
                Color = "var(--accent-green)",
                Description = "בוט עוזר לקריאה ולמידה מספרים",
                Usage = "חיפוש מידע בספרים, המלצות קריאה",
                Strengths = "הבנת הקשר, ניתוח טקסטים, המלצות מותאמות",
                Limitations = "תלוי באיכות החומר שהוזן למערכת",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = false, Text = "אני צריך עזרה בהבנת הנושא של אשמה במקבת'" },
                    new ChatMessage { IsBot = true, Text = "הנושא של אשמה מרכזי במקבת. בואו נבחן כמה ציטוטים מרכזיים:\n'Out, damned spot!' (מערכה 5) - ליידי מקבת מנסה לשטוף דם דמיוני, סמל לאשמה שלה.\nהמלך מקבת אומר: 'Will all great Neptune's ocean wash this blood clean from my hand?'\nרוצה שאעמיק בניתוח או שאציע מקורות נוספים?" }
                },
                WebsiteUrl = "https://www.bookbot.ai"
            },
            new ChatbotInfo
            {
                Id = "eduaid",
                Name = "EduAid Bot",
                LogoText = "EA",
                Color = "var(--accent-green)",
                Description = "עוזר לימודי המתאים את עצמו לסגנון הלמידה האישי",
                Usage = "התאמת תוכן לימודי, מעקב התקדמות",
                Strengths = "למידה מהתנהגות המשתמש, התאמה אישית מתמשכת",
                Limitations = "דורש זמן להכיר את המשתמש",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = true, Text = "שמתי לב שאתה מעדיף הסברים ויזואליים. בוא נלמד את נושא הנגזרות עם דיאגרמות." },
                    new ChatMessage { IsBot = false, Text = "כן, אני באמת מתקשה להבין נגזרות" },
                    new ChatMessage { IsBot = true, Text = "אז בוא נחשוב על נגזרת כמו מד מהירות ברכב - היא מודדת כמה מהר משתנה הפונקציה. אני אצייר לך גרף..." }
                },
                WebsiteUrl = "https://www.eduaid.ai"
            }
        };

        llmBots = new List<ChatbotInfo>
        {
            new ChatbotInfo
            {
                Id = "chatgpt",
                Name = "ChatGPT",
                LogoText = "GPT",
                Color = "linear-gradient(135deg, var(--primary-purple), var(--accent-green))",
                IsGradient = true,
                Description = "צ'אטבוט המבוסס על מודל שפתי גדול",
                Usage = "עזרה בכתיבה, הסברים מורכבים, תכנות, סיכום",
                Strengths = "ידע נרחב, יכולת הבנה עמוקה, יצירתיות",
                Limitations = "עלול לייצר מידע שגוי, חוסר עדכניות",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = false, Text = "איך אפשר להסביר את התורה היחסית לילד בן 10?" },
                    new ChatMessage { IsBot = true, Text = "נדמיין שאתה רוכב על רכבת מהירה מאוד. לך נראה שהזמן עובר רגיל, אבל לחבר שלך שעומד על הרציף נראה שהזמן שלך עובר לאט יותר. זו תורת היחסות - הזמן והמרחב משתנים בהתאם למהירות שלנו!\nכמו במשחק וידאו שבו הדמות שלך זזה מהר והכול מסביב נראה איטי..." }
                },
                WebsiteUrl = "https://chat.openai.com"
            },
            new ChatbotInfo
            {
                Id = "khanmigo",
                Name = "Khanmigo",
                LogoText = "KM",
                Color = "linear-gradient(135deg, var(--primary-purple), var(--accent-green))",
                IsGradient = true,
                Description = "עוזר לימודי המבוסס על מודל שפתי גדול",
                Usage = "הוראת מתמטיקה ומדעים, הכנה למבחנים",
                Strengths = "פירוק בעיות לשלבים, סבלנות, עידוד למידה עצמאית",
                Limitations = "מתמקד בעיקר במקצועות STEM",
                ChatExample = new List<ChatMessage>
                {
                    new ChatMessage { IsBot = false, Text = "אני תקוע במשוואה הריבועית 2x² - 5x - 3 = 0" },
                    new ChatMessage { IsBot = true, Text = "בוא נפתור יחד, אבל קודם - איזו שיטה אתה מכיר לפתרון משוואות ריבועיות?" },
                    new ChatMessage { IsBot = false, Text = "את הנוסחה" },
                    new ChatMessage { IsBot = true, Text = "מצוין! הנוסחה היא x = (-b ± √(b²-4ac)) / 2a\nבמשוואה שלנו: a=2, b=-5, c=-3\nנתחיל בחישוב הדיסקרימיננטה: b²-4ac = (-5)² - 4(2)(-3) = 25 + 24 = 49\nעכשיו תורך - מה השלב הבא?" }
                },
                WebsiteUrl = "https://www.khanacademy.org/khan-labs"
            }
        };
    }

    private async Task ToggleCard(string cardId)
    {
        await JSRuntime.InvokeVoidAsync("toggleCard", cardId);
    }

    public class ChatbotInfo
    {
        public string Id { get; set; } = "";
        public string Name { get; set; } = "";
        public string LogoText { get; set; } = "";
        public string Color { get; set; } = "";
        public bool IsGradient { get; set; }
        public string Description { get; set; } = "";
        public string Usage { get; set; } = "";
        public string Strengths { get; set; } = "";
        public string Limitations { get; set; } = "";
        public List<ChatMessage> ChatExample { get; set; } = new();
        public string? WebsiteUrl { get; set; }
    }

    public class ChatMessage
    {
        public bool IsBot { get; set; }
        public string Text { get; set; } = "";
    }
}